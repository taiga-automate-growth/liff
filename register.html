<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>サンメイト依頼管理システム</title>
</head>
<body>
    <p id="userId"></p>
    <p id="idtoken"></p>
    <p id="error"></p>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script>
        (async () => {
            try{
                await liff.init({liffId: "2006509501-J0v9Lpx8"});
                
                if(liff.isLoggedIn()){
                    const prorile = await liff.getProfile();
                    const userId = prorile.userId;
                    const userIdDom = document.getElementById("userId");
                    userIdDom.innerHTML = userId;

                    const idtoken = await liff.getIDToken();
                    const idtokenDom = document.getElementById("idtoken");
                    idtokenDom.innerHTML = idtoken;
                    // const gasUrl = `https://script.google.com/macros/s/AKfycbziWDGLr-z3EU37bkz4T45MexZRLCXHw9yq_ioiUuLKz_s5PFyQTbVrs2jQrKh46sCT/exec?path=liff/users/add&userId=${userId}`;
                    // const url = liff.permanentLink.createUrlBy(gasUrl);
                    // liff.openWindow({url:url,external: false});
                }
            }catch(e){
                const errorDom = document.getElementById("error");
                errorDom.innerHTML = JSON.stringify(e);
            }
        
        })();
    </script>
</body>
</html>